# Client-Server 파트

## 기능

- WebRTC 클라이언트에서 돌아가야 하는 server 프로그램 구현

### 3001 번 포트

- 미디어 스트림을 생성하는 미디어 디바이스들과 TCP connection을 맺는다.
- TCP connection으로 받아온 프레임 단위의 이미지들을 videos 디렉터리에 (고유 id).jpg 형식으로 저장한다.

### 3000 번 포트

- 루트 경로로 접근하면 (localhost:3000) index.pug 파일을 server side rendering으로 만들어 내려준다.
- 영상을 수신하고 있지 않다면
  - 현재 사설망 내에서 Client-Server 프로그램이 동작하고 있는 디바이스가 부여받은 사설 IP 주소를 보여준다.
- 영상을 수신 중이라면
  - TCP 연결로 수신중인 이미지 목록을 1초에 한번씩 받아와 갱신한다.
  - videos 디렉터리에 저장되어 있는 (고유 id).jpg 이미지들을 0.1초 단위로 img 태그에 갈아끼워 넣는다.

## 실행방식

1. 해당 repository를 pull 받는다
2. node app.js 로 서버 프로그램 실행

```js
node app.js
```

## 개선이 필요한 지점

1. 0.1초보다 더 짧게 이미지 요소들을 갈아끼우거나, 1초보다 짧게 이미지 목록을 받아와 갱신할 수 있다면, 더 부드러운 영상 스트리밍이 가능할 수 있다.

- 해당 사항은 여러 시도를 통해 정량적으로, 정성적으로 분석할 필요가 있다.

2. 미디어 스트림을 만들어내는 여러 다른 디바이스들로부터 TCP 연결을 맺을 때, 영상 송출 끊김이 발생하는 것을 확인하였다.
